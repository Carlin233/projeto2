<!-- ... início omitido, igual ao seu -->
<script>
  async function atualizarPainel() {
    const destaque1 = document.getElementById('destaque1');
    const destaque2 = document.getElementById('destaque2');
    const marquee = document.getElementById('marquee');

    try {
      const res = await fetch('/api/avisos');
      const historico = await res.json();

      if (!historico || historico.length === 0) {
        destaque1.innerHTML = 'Aguardando mensagem...';
        destaque2.innerHTML = '';
        marquee.textContent = 'Sem mensagens...';
        return;
      }

      const maisRecente = historico[0];
      destaque1.innerHTML = `${maisRecente.mensagem}<span class="hora-destaque">${formatarData(maisRecente.data_hora)}</span>`;

      if (historico.length > 1) {
        const segundo = historico[1];
        destaque2.innerHTML = `${segundo.mensagem}<span class="hora-destaque">${formatarData(segundo.data_hora)}</span>`;
      } else {
        destaque2.innerHTML = '';
      }

      const mensagens = historico.map(item =>
        `${item.mensagem}<span class="hora">${formatarData(item.data_hora)}</span>`
      );
      marquee.innerHTML = mensagens.join(' — ');
    } catch (error) {
      destaque1.innerHTML = 'Erro ao carregar mensagens.';
      console.error(error);
    }
  }

  function formatarData(data) {
    const d = new Date(data);
    return d.toLocaleString('pt-BR');
  }

  function voltar() {
    window.history.back();
  }

  setInterval(atualizarPainel, 2000);
  atualizarPainel();
</script>
</body>
</html>